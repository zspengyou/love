/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * https://github.com/marcolago/flowtime.js/blob/master/js/flowtime.min.js
 * 
 * MIT licensed
 *
 * Copyright (C) 2012-2013 Marco Lago, http://marcolago.com
 */


var Brav1Toolbox=function(){var r=["","-webkit-","-moz-","-ms-","-o-"];function i(){return window.getComputedStyle?window.getComputedStyle(document.body):document.documentElement.style}var l=i();function a(e){for(var t=l||i(),n=0;n<r.length;n++){var a=r[n].replace(/-/g,""),o=e;if(0<a.length&&(o=o.charAt(0).toUpperCase()+o.substr(1)),(o=a+o)in t==1)return o}return""}function o(e,t){if(e){if(e.classList)return e.classList.contains(t);if(e.className)return-1!=e.className.indexOf(t)}return!1}return{addListener:function(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,n)},removeListener:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)},dispatchEvent:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");for(var a in n.initEvent(e,!0,!0),t)n[a]=t[a];document.dispatchEvent(n)}},testCSS:function(e){return""!=a(e)},getPrefixed:a,getCSSValue:function(e,t){var n=a(t);return window.getComputedStyle?window.getComputedStyle(e)[n]:e.style[n]},typeOf:function(e){return!!e&&Object.prototype.toString.call(e).match(/(\w+)\]/)[1]},addClass:function(e,t){if(e.classList)e.classList.add(t);else if(0==o(e,t)){var n=e.className;0<n.length&&(n+=" "),e.className=n+t}},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else{var n=e.className;-1!=n.indexOf(t)&&(n=-1!=n.indexOf(" "+t)?n.replace(" "+t,""):-1!=n.indexOf(t+" ")?n.replace(t+" ",""):n.replace(t,"")),e.className=n}},hasClass:o,distance:function(e,t){var n,a;return n=t.x-e.x,n*=n,a=t.y-e.y,a*=a,Math.abs(Math.sqrt(n+a))}}}();!function(o,e){var r,i,l="";function a(e,t,n,a){e[r](l+t,"wheel"==i?n:function(e){var t={originalEvent:e=e||o.event,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==i?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,n(t)},a||!1)}o.addEventListener?r="addEventListener":(r="attachEvent",l="on"),i="onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",o.addWheelListener=function(e,t,n){a(e,i,t,n),"DOMMouseScroll"==i&&a(e,"MozMousePixelScroll",t,n)}}(window,document);var Flowtime=function(){var e=!1;("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&(e=!0);var o,t,n,a,l=window.history.pushState,s=".ft-section",r="ft-page",u="."+r,c=".ft-fragment",i="revealed",g="actual",d="revealed-temp",v="revealed-once",h="ft-default-progress",p="ft-section-thumb",x="ft-page-thumb",m="."+x,b="ft-cross",T="ft-scroll-the-section",P="flowtimenavigation",y=document.querySelector(".flowtime"),S=y.parentNode,C=(document.querySelector("html"),document.querySelector("body")),w=!1,B="",N={section:0,page:0},L=document.title,A=22,O=null,E=0,_=!1,I=!1,M=!1,D=!0,k=!0,q=!1,X=!1,F=!1,Y=!1,K=!1,H=50,j=50,R=null!==document.querySelector(".parallax"),V=!1,z=!0,U=!0,W=!0,Z=!0,G=!0,J=!0,Q=!0,$=!0,ee=!1,te=0,ne=2e3,ae=!0,oe=!1,re=500,ie=Brav1Toolbox.hasClass(y,b),le=Brav1Toolbox.getPrefixed("transform"),se=Brav1Toolbox.testCSS("transform"),ue=!0,ce=!0,fe=0,ge=0,de=0,ve=0,he=!1,pe=!1,xe=!1,me=!1,be=!1,Te=Brav1Toolbox.hasClass(y,T),Pe=[],ye=0,Se=!1,Ce=null;t=Brav1Toolbox.getCSSValue(y,"transitionDuration"),n=parseFloat(t),a=t.replace(""+n,""),!isNaN(n)&&0<n&&("s"===a?re=1e3*n:"ms"===a&&(re=n)),Rt(re),ne=4*re;var we=!0;try{var Be=document.querySelector("html").className.toLowerCase();-1==Be.indexOf("ie7")&&-1==Be.indexOf("ie8")&&-1==Be.indexOf("lt-ie9")||(we=!1)}catch(e){we=!1}we&&Brav1Toolbox.addClass(S,"ft-absolute-nav"),window.onload=function(){Ye.updateOffsets()};var Ne,Le,Ae,Oe,Ee,_e,Ie,Me,De,ke,qe,Xe,Fe,Ye=(Ie=[],Me=[],Fe=Xe=qe=ke=De=0,Ke(),{update:Ke,updateFragments:We,showFragments:function(){for(var e=0;e<Oe.length;e++)Brav1Toolbox.addClass(Oe[e],d),Oe[e].onceRevealed=!0},hideFragments:function(){for(var e=0;e<Oe.length;e++)Brav1Toolbox.removeClass(Oe[e],d)},getSection:function(e){return Xe},getPage:function(e){return Fe},getSections:function(){return Ne},getPages:function(e){return Le[e]},getAllPages:function(){return Ae},getNextSection:function(e,t){var n=Fe,a=!0!==_&&e,o=void 0,r=!0===t&&0<Ee[Xe][Fe].length&&Ie[Xe][Fe]<Ee[Xe][Fe].length-1&&!0!==a&&!1===_;if(!0===k){for(var i=o=0;i<Ee[Xe][Fe].length;i++)!0===Ee[Xe][Fe][i].classList.contains(v)&&(o+=1);o>=Ee[Xe][Fe].length&&(r=!1)}if(r)return ze(Xe,Fe,o),Ve(Le[Xe][Fe]);!(n=0)===a&&Xe+1<=Le.length-1?n=0:(!0!==a||!0===D||Xe+1>Le.length-1)&&(n=Fe);var l=Math.min(Xe+1,Le.length-1);return Xe=!0===X&&l===Xe?0:l,_||(!0===me&&void 0!==Pe[Xe]&&(n=Pe[Xe]),!0===be&&(n=ye)),Re(Le[Xe],n)},getPrevSection:function e(t,n){var a=Fe,o=!0!==_&&t;if(!0===n&&0<Ee[Xe][Fe].length&&0<=Ie[Xe][Fe]&&!0!==o&&!1===_)return!0===Ee[Xe][Fe][Ie[Xe][Fe]].classList.contains("revealed-once")?(Ie[Xe][Fe]=-1,e(t,n)):Ue(Xe,Fe),Ve(Le[Xe][Fe]);!(a=0)===o&&0<=Xe-1?a=0:(!0!==o||!0===D||Xe-1<0)&&(a=Fe);var r=Math.max(Xe-1,0);return Xe=!0===X&&r===Xe?Le.length-1:r,_||(!0===me&&0<=Pe[Xe]&&(a=Pe[Xe]),!0===be&&(a=ye)),Re(Le[Xe],a)},getNextPage:function(e){var t=void 0,n=0<Ee[Xe][Fe].length&&Ie[Xe][Fe]<Ee[Xe][Fe].length-1&&!0!==e&&!1===_;if(!0===k){for(var a=t=0;a<Ee[Xe][Fe].length;a++)!0===Ee[Xe][Fe][a].classList.contains(v)&&(t+=1);t>=Ee[Xe][Fe].length&&(n=!1)}if(n)ze(Xe,Fe,t);else if(void 0===Le[Xe][Fe+1]){if(!1===ue)return!1;void 0!==Le[Xe+1]?(Xe+=1,Fe=0):void 0===Le[Xe+1]&&!0===X&&(Fe=Xe=0)}else Fe=Math.min(Fe+1,Le[Xe].length-1);return Ve(Le[Xe][Fe])},getPrevPage:function e(t){if(0<Ee[Xe][Fe].length&&0<=Ie[Xe][Fe]&&!0!==t&&!1===_)!0===Ee[Xe][Fe][Ie[Xe][Fe]].classList.contains("revealed-once")?(Ie[Xe][Fe]=-1,e(t)):Ue(Xe,Fe);else if(0===Fe){if(!1===ue)return!1;void 0!==Le[Xe-1]?(--Xe,Fe=!0===pe?0:Le[Xe].length-1):void 0===Le[Xe-1]&&!0===X&&(Xe=Le.length-1,Fe=!0===pe?0:Le[Xe].length-1)}else Fe=Math.max(Fe-1,0);return Ve(Le[Xe][Fe])},getSectionLength:function(e){return Le[e].length},getSectionsLength:function(){return De},getPagesLength:function(){return ke},getPagesTotalLength:function(){return qe},getPageIndex:Ze,getSectionByIndex:function(e){return Ne[e]},getPageByIndex:function(e,t){return Le[t][e]},getCurrentSection:function(){return Ne[Xe]},getCurrentPage:Ge,getPrevSectionObject:function(){var e=function(){var e=Xe-1;if(e<0){if(!0!==X)return null;e=Le.length-1}return e}();return null===e?null:Ne[e]},getPrevPageObject:function(){var e=Fe-1;if(e<0){if(0===Xe&&X){var t=Le.length-1;return Le[t][Le[t].length-1]}return 0<Xe?Le[Xe-1][Le[Xe-1].length-1]:null}return Le[Xe][e]},getNextSectionObject:function(){var e=function(){var e=Xe+1;if(e>Le.length-1){if(!0!==X)return null;e=0}return e}();return null===e?null:Ne[e]},getNextPageObject:function(){var e=Fe+1;return e>Le[Xe].length-1?Xe===Le.length-1&&X?Le[0][0]:Xe<Le.length-1?Le[Xe+1][0]:null:Le[Xe][e]},getCurrentFragment:function(){return Ee[Xe][Fe][Je()]},getCurrentFragmentIndex:Je,getProgress:function(){if(0===Xe&&0===Fe)return 0;for(var e=0,t=0;t<Xe;t++)e+=Le[t].length;return e+=Le[Xe][Fe].index+1},getHash:function(e){e&&(Fe=Ze(e).page,Xe=Ze(e).section);var t="";return t+=ht(Ne[Xe]),0<Le[Xe].length&&(t+="/"+ht(Le[Xe][Fe])),t},setPage:function(e){var t=function(e){if(0<e.length){var t=e.replace("#/","").split("/");if(0<t.length){var n=document.querySelectorAll(s+"[data-prog=__"+t[0]+"]"),a=document.querySelectorAll(s+"[data-id=__"+t[0]+"]"),o=0<n.length?n:a,r=null,i=null;if(null!==o){for(var l=0;l<o.length&&(i=o[l],1<t.length&&(r=i.querySelector(u+"[data-prog=__"+t[1]+"]")||i.querySelector(u+"[data-id=__"+t[1]+"]")),null===r);l++);null===r&&i&&(r=i.querySelector(u))}return r}}}(e);if(t){for(var n=t.parentNode,a=0;a<Le.length;a++){var o=Le[a];if(Ne[a]===n){Xe=a;for(var r=0;r<o.length;r++)if(o[r]===t){Fe=r;break}}}We()}return t},switchActivePage:Qe,getCurrentHilited:function(){return _e},hasNextSection:function(){return Xe<Ne.length-1},hasPrevSection:function(){return 0<Xe},hasNextPage:function(){return Fe<Le[Xe].length-1},hasPrevPage:function(){return 0<Fe},updateOffsets:je,getParallaxElements:function(){return Me}});function Ke(){Le=[],Me=[],Oe=document.querySelectorAll(c),Ee=[],Ne=y.querySelectorAll(".flowtime > "+s),Ae=y.querySelectorAll(".flowtime "+u);for(var e=0;e<Ne.length;e++){var t=[];Ee[e]=[],Ie[e]=[],E+=1;var n=Ne[e];n.getAttribute("data-id")?n.setAttribute("data-id","__"+xt(n.getAttribute("data-id"))):n.setAttribute("data-id","__"+E),n.getAttribute("data-prog")?n.setAttribute("data-prog","__"+xt(n.getAttribute("data-prog"))):n.setAttribute("data-prog","__"+E),n.index=e,pages=n.querySelectorAll(u),qe+=pages.length,ke=Math.max(ke,pages.length);for(var a=0;a<pages.length;a++){var o=pages[a];if(o.getAttribute("data-id")?o.setAttribute("data-id","__"+xt(o.getAttribute("data-id"))):o.setAttribute("data-id","__"+(a+1)),o.getAttribute("data-prog")?o.setAttribute("data-prog","__"+xt(o.getAttribute("data-prog"))):o.setAttribute("data-prog","__"+(a+1)),o.index=a,!o.getAttribute("data-title")){var r=o.querySelector("h1");null!==r&&""!==r.textContent.lenght&&o.setAttribute("data-title",r.textContent)}He(o,e,a),t.push(o);var i=o.querySelectorAll(c);Ee[e][a]=i,Ie[e][a]=-1}Le.push(t)}De=Ne.length,Tt(),je()}function He(e,t,n){if(R){void 0===Me[t]&&(Me[t]=[]),void 0===Me[t][n]&&(Me[t][n]=[]);var a=e.querySelectorAll(".parallax");if(0<a.length)for(var o=0;o<a.length;o++){var r=a[o],i=H,l=j;if(null!==r.getAttribute("data-parallax")){var s=r.getAttribute("data-parallax").split(",");i=l=s[0],1<s.length&&(l=s[1])}r.pX=i,r.pY=l,Me[t][n].push(r)}}}function je(){fe=y.offsetLeft,ge=y.offsetTop;for(var e=0;e<Ae.length;e++){var t=Ae[e],n=t.offsetParent;0===e&&(de=t.offsetLeft-fe,ve=t.offsetTop-ge),!0===ie?(t.x=t.offsetLeft-(fe+de),t.y=n.offsetTop):(t.x=n.offsetLeft,t.y=t.offsetTop-(ge+ve))}}function Re(e,t){var n=e[t];if(void 0===n)if(!0===xe)n=e[0],t=0;else for(var a=t;0<=a;a--)if(void 0!==e[a]){n=e[a],t=a;break}return Fe=t,_||We(),Ve(n)}function Ve(e){return!0===_?void Qe(e):e}function ze(e,t,n){void 0!==n?Ie[e][t]=n:n=Ie[e][t]+=1;for(var a=Ee[e][t][n],o=0;o<=n;o++)Brav1Toolbox.addClass(Ee[e][t][o],i),Brav1Toolbox.removeClass(Ee[e][t][o],g),!0===k&&Brav1Toolbox.addClass(Ee[e][t][o],v);Brav1Toolbox.addClass(a,g)}function Ue(e,t,n){void 0!==n?Ie[e][t]=n:n=Ie[e][t];for(var a=0;a<Ee[e][t].length;a++)n<=a&&(Brav1Toolbox.removeClass(Ee[e][t][a],i),Brav1Toolbox.removeClass(Ee[e][t][a],d)),Brav1Toolbox.removeClass(Ee[e][t][a],g);0<=--n&&Brav1Toolbox.addClass(Ee[e][t][n],g),Ie[e][t]=n}function We(){for(var e=0;e<Ee.length;e++)for(var t=Ee[e],n=0;n<t.length;n++){var a=t[n];if(0<a.length)if(Xe<e)for(f=a.length-1;0<=f;f--)Ue(e,n,f);else if(e<Xe)for(f=0;f<a.length;f++)ze(e,n,f);else if(e==Xe)if(Fe<n)for(f=a.length-1;0<=f;f--)Ue(e,n,f);else if(n<Fe)for(f=0;f<a.length;f++)ze(e,n,f);else if(n==Fe){if(!0===D&&(N.section>Ye.getPageIndex().section||N.page>Ye.getPageIndex().page))for(f=0;f<a.length;f++)ze(e,n,f);else for(f=a.length-1;0<=f;f--)Ue(e,n,f);!1!==D&&(N.section>Ye.getPageIndex().section||N.page>Ye.getPageIndex().page)?Ie[e][n]=a.length-1:Ie[e][n]=-1}}}function Ze(e){var t=Xe,n=Fe;return void 0!==e&&(t=e.parentNode.index,n=e.index),{section:t,page:n}}function Ge(){return Le[Xe][Fe]}function Je(){return Ie[Xe][Fe]}function Qe(e,t){for(var n,a=e.parentNode.index,o=0;o<Le.length;o++)for(var r=Le[o],i=0;i<r.length;i++){var l=r[i];Brav1Toolbox.removeClass(l,"past-section"),Brav1Toolbox.removeClass(l,"future-section"),Brav1Toolbox.removeClass(l,"past-page"),Brav1Toolbox.removeClass(l,"future-page"),l!==e&&(Brav1Toolbox.removeClass(l,"hilite"),!1===_&&l!==Ge()&&Brav1Toolbox.removeClass(l,"actual"),o<a?Brav1Toolbox.addClass(l,"past-section"):a<o&&Brav1Toolbox.addClass(l,"future-section"),l.index<e.index?Brav1Toolbox.addClass(l,"past-page"):l.index>e.index&&Brav1Toolbox.addClass(l,"future-page"))}Brav1Toolbox.addClass(e,"hilite"),t&&(n=e,Brav1Toolbox.addClass(n,"actual")),_e=e}function $e(e){if(Z){if("A"===e.target.nodeName||"A"===e.target.parentNode.nodeName){var t=e.target.getAttribute("href")||e.target.parentNode.getAttribute("href");if("#"===t)return void e.preventDefault();if(t)if(e.target.blur(),"#"==t.substr(0,1))e.preventDefault(),mt(Ye.setPage(t),!0,!0)}if(_){for(var n=e.target;n&&!Brav1Toolbox.hasClass(n,r);)n=n.parentNode;Brav1Toolbox.hasClass(n,r)&&(e.preventDefault(),mt(n,null,!0))}if(Brav1Toolbox.hasClass(e.target,x)){e.preventDefault();Number(xt(e.target.getAttribute("data-section"))),Number(xt(e.target.getAttribute("data-page")));Xt()}}}function et(e,t){if(w||t){var n=document.location.hash.replace("#/","");mt(Ye.setPage(n),!1)}}we&&(e&&Brav1Toolbox.addListener(document,"touchend",function(e){$e(e)},!1),Brav1Toolbox.addListener(document,"click",$e,!1)),!1===w&&window.history.pushState?window.onpopstate=function(e){var t;w=!1,t=e.state?e.state.token.replace("#/",""):document.location.hash.replace("#/","");mt(Ye.setPage(t),!1)}:w=!0,Brav1Toolbox.addListener(window,"hashchange",et);y.offsetX;var tt=0,nt=0,at=0,ot=0,rt=100;function it(e){ot=at=0,e=ut(e),tt=e.clientX,nt=e.clientY,0;var t=function(){var e=y.style[le],t=e.indexOf("translateX(")+11,n=e.substring(t,e.indexOf(")",t));-1!=n.indexOf("%")?(n=n.replace("%",""),n=parseInt(n)/100*window.innerWidth):-1!=n.indexOf("px")&&(n=parseInt(n.replace("px","")));var a=e.indexOf("translateY(")+11,o=e.substring(a,e.indexOf(")",a));-1!=o.indexOf("%")?(o=o.replace("%",""),o=parseInt(o)/100*window.innerHeight):-1!=o.indexOf("px")&&(o=parseInt(o.replace("px","")));return{x:n,y:o}}();t.x,t.y,V&&Brav1Toolbox.addListener(y,"mousemove",lt,!1)}function lt(e){e.preventDefault(),e=ut(e),at=e.clientX-tt,ot=e.clientY-nt}function st(e){if(W&&(Math.abs(at)>=rt||Math.abs(ot)>=rt))if(e=ut(e),"x"==(Math.abs(at)>=Math.abs(ot)?"x":"y")&&Math.abs(at)>=rt){if(0<at)return void(!0===ie?qt():Dt(void 0,!1));if(at<0)return void(!0===ie?kt():Mt(void 0,!1))}else{if(0<ot&&Math.abs(ot)>=rt)return void(!0===ie?Dt(void 0,!1):qt());if(ot<0)return void(!0===ie?Mt(void 0,!1):kt())}Brav1Toolbox.removeListener(y,"mousemove",lt)}function ut(e){return e.touches&&(e=e.touches[0]),e}e&&(y.addEventListener("touchstart",it,!1),y.addEventListener("touchmove",lt,!1),y.addEventListener("touchend",st,!1)),Brav1Toolbox.addListener(window,"scroll",function(e){e.preventDefault(),Tt()}),addWheelListener(y,function(e){var t=e.target,n=!0!==function(e){var t=!1,n=e;for(;n.className&&n.className.indexOf("ft-page")<0;)n.scrollHeight>n.clientHeight-1&&(t=!0),n=n.parentNode;-1!=n.className.indexOf("ft-page")&&n.scrollHeight>n.clientHeight-1&&(t=!0);!0===t&&((n.scrollHeight-n.scrollTop===n.clientHeight||0===n.scrollTop&&n.alreadyScrolled&&!0===n.alreadyScrolled)&&(t=!1),n.alreadyScrolled=!0);return t}(t)&&z;!1===ee&&!0===n&&function(e){ee=!0,te=setTimeout(ct,ne),0===e.deltaY?0<e.deltaX?!0===ie?kt():Mt(void 0,e.shiftKey):e.deltaX<0&&(!0===ie?qt():Dt(void 0,e.shiftKey)):0<e.deltaY?!0===ie?Mt(void 0,e.shiftKey):kt():e.deltaY<0&&(!0===ie?Dt(void 0,e.shiftKey):qt())}(e)});function ct(){clearTimeout(te),ee=!1}var ft;ft=NaN,Brav1Toolbox.addListener(window,"resize",gt),window.addEventListener("orientationchange",gt,!1);function gt(){dt(),_||(ft=setTimeout(vt,300))}function dt(){clearTimeout(ft)}function vt(){Ye.updateOffsets(),mt()}function ht(e){var t=e.getAttribute("data-id"),n=e.getAttribute("data-prog"),a="";return null!==t?a=t.replace(/__/,""):null!==n&&(a=n.replace(/__/,"")),a}function pt(e){return"__"!=e.substr(0,2)?"__"+e:e}function xt(e){return"__"==e.substr(0,2)?e.replace(/__/,""):e}function mt(e,t,n,a){t=!1!==t||t,e||(e=null!==Ye.getCurrentPage()?Ye.getCurrentPage():document.querySelector(u),t=!0),!1===a?_t():!0===oe&&It(),function(e){var t,n,a=Ye.getPageIndex(e);!0===q?(t=e.x,n=e.y):!0===ie?(n=a.section,t=a.page):(t=a.section,n=a.page);if(!0===Te){var o=e.parentNode,r=y,i=o;!0===ie&&(r=o,i=y),se?(r.style[le]=q?"translateX("+-t+"px)":"translateX("+100*-t+"%)",i.style[le]=q?"translateY("+-n+"px)":"translateY("+100*-n+"%)"):(r.style.left=q?t+"px":100*-t+"%",i.style.top=q?n+"px":100*-n+"%")}else se?y.style[le]=q?"translateX("+-t+"px) translateY("+-n+"px)":"translateX("+100*-t+"%) translateY("+100*-n+"%)":q?(y.style.top=-n+"px",y.style.left=-t+"px"):(y.style.top=100*-n+"%",y.style.left=100*-t+"%");Tt()}(e),!0===oe&&It(!0),function(e){if(R)for(var t=Ye.getPageIndex(e),n=Ye.getParallaxElements(),a=0;a<n.length;a++){var o=n[a];if(void 0!==o)for(var r=0;r<o.length;r++){var i=o[r];if(void 0!==i)for(var l=0;l<i.length;l++){var s=i[l],u=0,c=0;t.section<a?u=s.pX:t.section>a&&(u=-s.pX),t.page<r?c=s.pY:t.page>r&&(c=-s.pY);var f="%";K&&(f="px"),s.style[le]=!0===ie?"translateX("+c+f+") translateY("+u+f+")":"translateX("+u+f+") translateY("+c+f+")"}}}}(e),_&&St(!1,!1);var o=Ye.getHash(e);!0===n&&Ye.updateFragments();var r=Ye.getPageIndex(e);if(N.section!=r.section||N.page!=r.page)if(!0===ce&&null!==l&&!1!==t&&-1===Ye.getCurrentFragmentIndex()){var i={token:o};B="#/"+o;try{window.history.pushState(i,null,B)}catch(e){!0===Se&&console.log(e)}}else!0===ce&&(document.location.hash="/"+o);!function(e){var t=L,n=Ye.getCurrentPage().getAttribute("data-title");if(null===n)for(var a=e.split("/"),o=0;o<a.length;o++)t+=" | "+a[o];else null!==Ye.getCurrentSection().getAttribute("data-title")&&(t+=" | "+Ye.getCurrentSection().getAttribute("data-title")),t+=" | "+n;document.title=t}(o),Pe[r.section]=r.page,N.section===r.section&&N.page!==r.page&&(ye=r.page),bt(),N=r,Ye.switchActivePage(e,!0),F&&yt()}function bt(){if(!1!==ae){var e=Ye.getPageIndex(),t={section:Ye.getCurrentSection(),page:Ye.getCurrentPage(),sectionIndex:e.section,pageIndex:e.page,pastSectionIndex:N.section,pastPageIndex:N.page,prevSection:Ye.hasPrevSection(),nextSection:Ye.hasNextSection(),prevPage:Ye.hasPrevPage(),nextPage:Ye.hasNextPage(),fragment:Ye.getCurrentFragment(),fragmentIndex:Ye.getCurrentFragmentIndex(),isOverview:_,progress:Ye.getProgress(),total:Ye.getPagesTotalLength(),isLoopable:X,clickerMode:Y,isAutoplay:wt};Brav1Toolbox.dispatchEvent(P,t),null!==Ce&&Ce(t)}else ae=!0}function Tt(){window.scrollTo(0,0)}function Pt(){O&&O.parentNode.removeChild(O);var e=document.createDocumentFragment();(O=document.createElement("div")).className=h+(!0===ie?" ft-cross":""),e.appendChild(O);for(var t=0;t<Ye.getSectionsLength();t++){var n=document.createElement("div");n.setAttribute("data-section","__"+t),n.className=p,Brav1Toolbox.addClass(n,"thumb-section-"+t);for(var a=Ye.getPages(t),o=0;o<a.length;o++){var r=document.createElement("div");r.className=x,r.setAttribute("data-section","__"+t),r.setAttribute("data-page","__"+o),Brav1Toolbox.addClass(r,"thumb-page-"+o),n.appendChild(r)}O.appendChild(n)}C.appendChild(O),yt()}function yt(){if(null!==O)for(var e=O.querySelectorAll(m),t=0;t<e.length;t++){var n=e[t],a=Number(xt(n.getAttribute("data-section"))),o=Number(xt(n.getAttribute("data-page")));a==Ye.getPageIndex().section&&o==Ye.getPageIndex().page?Brav1Toolbox.addClass(e[t],"actual"):Brav1Toolbox.removeClass(e[t],"actual")}}function St(e,t){var n,a;_?(n=e,a=t,_=!1,Brav1Toolbox.removeClass(C,"ft-overview"),Ye.hideFragments(),!0==(a=!1!==a)&&(!0===n?mt(o):mt())):(o=Ye.getCurrentPage(),Ct())}function Ct(){_=!0,Brav1Toolbox.addClass(C,"ft-overview"),Ye.showFragments(),(!1===I?function(e){if(e){var t,n;!0===ie?(n=100/Ye.getSectionsLength(),t=100/Ye.getPagesLength()):(t=100/Ye.getSectionsLength(),n=100/Ye.getPagesLength()),scale=.9*Math.min(t,n);var a=(100-Ye.getSectionsLength()*scale)/2,o=(100-Ye.getPagesLength()*scale)/2;y.style[le]="translate("+a+"%, "+o+"%) scale("+scale/100+", "+scale/100+")"}}:function(e){if(e){scale=A;var t,n,a=Ye.getPageIndex();!0===ie?(t=50-scale*a.section-scale/2,n=50-scale*a.page-scale/2):(n=50-scale*a.section-scale/2,t=50-scale*a.page-scale/2),y.style[le]="translate("+n+"%, "+t+"%) scale("+scale/100+", "+scale/100+")"}})(!0),bt()}Brav1Toolbox.addListener(window,"keydown",function(e){var t=e.target.tagName;"INPUT"!=t&&"TEXTAREA"!=t&&"SELECT"!=t&&37<=e.keyCode&&e.keyCode<=40&&e.preventDefault()}),Brav1Toolbox.addListener(window,"keyup",function(e){if(U){var t=e.target.tagName;if("INPUT"!==t&&"TEXTAREA"!==t&&"SELECT"!==t)switch(e.preventDefault(),e.keyCode){case 27:St(!0);break;case 33:Y?qt(e.shiftKey):Kt();break;case 34:Y?kt(e.shiftKey):Ht();break;case 35:Yt();break;case 36:Ft();break;case 37:!0===ie?qt(e.shiftKey):Dt(null,e.shiftKey);break;case 39:!0===ie?kt(e.shiftKey):Mt(null,e.shiftKey);break;case 38:!0===ie?Dt(null,e.shiftKey):qt(e.shiftKey);break;case 40:!0===ie?Mt(null,e.shiftKey):kt(e.shiftKey);break;case 13:_&&Xt(Ye.getCurrentHilited())}}});var wt=!1,Bt=0,Nt=1e4,Lt=!1,At=0,Ot=0;function Et(){wt=!0,clearTimeout(Bt),At=Date.now(),Bt=setTimeout(function(){kt(Lt),Et()},Nt-Ot),Ot=0}function _t(e){oe=!0,y.style[Brav1Toolbox.getPrefixed("transition-duration")]="0ms",!0===e&&setTimeout(It,re)}function It(e){!(oe=!1)===e?setTimeout(function(){y.style[Brav1Toolbox.getPrefixed("transition-duration")]=re/1e3+"s"},re):y.style[Brav1Toolbox.getPrefixed("transition-duration")]=re/1e3+"s"}function Mt(e,t){if(!0===J){e=null!==e?e:he,!0===t&&(e=!he);var n=Ye.getNextSection(e,M);void 0!==n?mt(n):_&&I&&Ct()}}function Dt(e,t){if(!0===G){e=null!==e?e:he,!0===t&&(e=!he);var n=Ye.getPrevSection(e,M);void 0!==n?mt(n):_&&I&&Ct()}}function kt(e){if(!0===$){var t=Ye.getNextPage(e);if(!1===t)return;void 0!==t?mt(t):_&&I&&Ct()}}function qt(e){if(!0===Q){var t=Ye.getPrevPage(e);if(!1===t)return;void 0!==t?mt(t):_&&I&&Ct()}}function Xt(){var e=Xt.arguments;if(0<e.length){var t=null;if(1==e.length)if("Object"===Brav1Toolbox.typeOf(e[0])){var n=e[0],a=n.section,o=n.page;if(null!=a){var r=document.querySelector(s+"[data-id="+pt(a)+"]");if(null!=o&&null!==(t=r.querySelector(u+"[data-id="+pt(o)+"]")))return void mt(t)}}else void 0!==e[0].nodeName&&mt(e[0],null,!0);if("Number"===Brav1Toolbox.typeOf(e[0])||0===e[0])return void mt(t=Ye.getPageByIndex(e[1],e[0]))}}function Ft(){Xt()}function Yt(){var e=Ye.getSectionsLength()-1;Xt(Ye.getPages(e).length)}function Kt(){!0===Q&&Xt(Ye.getPageIndex().section)}function Ht(){if(!0===$){var e=Ye.getPageIndex();Xt(e.section,Ye.getPages(e.section).length)}}function jt(e){D=!0===e}function Rt(e){re=e,y.style[Brav1Toolbox.getPrefixed("transition-duration")]=re+"ms"}return{start:function e(){F&&null===O&&Pt(),0<document.location.hash.length?(_t(!0),et(0,!0)):0<e.arguments.length?Xt.apply(this,e.arguments):(Xt(),yt())},updateNavigation:function(e){ae=!1!==e;var t=Ye.getCurrentPage();Ye.update(),mt(t,!1,!1,!1),!0===F&&Pt()},nextSection:Mt,prevSection:Dt,next:kt,prev:qt,nextFragment:kt,prevFragment:qt,gotoPage:Xt,gotoHome:Ft,gotoTop:Kt,gotoBottom:Ht,gotoEnd:Yt,toggleOverview:St,showOverview:function(e,t,n){_!==e&&(_=!e,St(t,n))},fragmentsOnSide:function(e){M=!0===e,jt(e)},fragmentsOnBack:jt,fragmentsAlwaysOnOnceRevealed:function(e){k=!0===e},useHistory:function(e){l=!0===e},slideInPx:function(e){!0===(q=!0===e)&&Ye.updateOffsets(),mt()},useOverviewVariant:function(e){I=!0===e},twoStepsSlide:function(e){0},showProgress:function(e){(F=!0===e)?(null===O&&Pt(),yt()):null!==O&&null!==O&&(C.removeChild(O),O=null)},defaultParallaxValues:function(e,t){H=e,j=void 0===t?H:t,Ye.update()},parallaxInPx:function(e){K=!0===e},updateURL:function(e){!1===(ce=!1!==e)&&(document.location.hash="")},addEventListener:function(e,t,n){Brav1Toolbox.addListener(document,e,t,n)},getDefaultProgress:function(){return O},getSection:Ye.getCurrentSection,getPage:Ye.getCurrentPage,getSectionIndex:function(){return Ye.getPageIndex().section},getPageIndex:function(){return Ye.getPageIndex().page},getPrevSection:Ye.getPrevSectionObject,getNextSection:Ye.getNextSectionObject,getPrevPage:Ye.getPrevPageObject,getNextPage:Ye.getNextPageObject,autoplay:function(e,t,n,a){Nt=isNaN(parseInt(t))?Nt:t,Lt=!0===a||!1,!0===e&&!1!==n&&Et()},play:Et,pause:function(){wt=!1,Ot=Date.now()-At,clearTimeout(Bt)},stop:function(){wt=!1,clearTimeout(Bt),Ot=At=0},loop:function(e){X=!0===e},clicker:function(e){Y=!0===e},mouseDragEnabled:function(e){(V=e)?(Brav1Toolbox.addListener(y,"mousedown",it,!1),Brav1Toolbox.addListener(y,"mouseup",st,!1)):(Brav1Toolbox.removeListener(y,"mousedown",it),Brav1Toolbox.removeListener(y,"mouseup",st))},enableNavigation:function(e,t,n,a){Z=!1!==e,U=!1!==t,z=!1!==n,W=!1!==a},disableNavigation:function(e,t,n,a){Z=!1===e,U=!1===t,z=!1===n,W=!1===a},enableSectionNavigation:function(e,t){G=!1!==e,J=!1!==t},disableSectionNavigation:function(e,t){G=!1===e,J=!1===t},enablePageNavigation:function(e,t){Q=!1!==e,$=!1!==t},disablePageNavigation:function(e,t){Q=!1===e,$=!1===t},setLinksNavigation:function(e){Z=!1!==e},setKeyboardNavigation:function(e){U=!1!==e},setScrollNavigation:function(e){z=!1!==e},setTouchNavigation:function(e){W=!1!==e},setCrossDirection:function(e){ie!==e&&(ie=!0===e,Brav1Toolbox.hasClass(y,b)||!0!==ie?Brav1Toolbox.hasClass(y,b)&&!0!==ie&&Brav1Toolbox.removeClass(y,b):Brav1Toolbox.addClass(y,b),O&&(Brav1Toolbox.hasClass(O,b)||!0!==ie?Brav1Toolbox.hasClass(O,b)&&!0!==ie&&Brav1Toolbox.removeClass(O,b):Brav1Toolbox.addClass(O,b)),Ye.updateOffsets(),mt())},setDebouncingDelay:function(e){0},setTransitionTime:Rt,setMomentumScrollDelay:function(e){ne=e},getTransitionTime:function(){return re},onNavigation:function(e){Ce=e},gridNavigation:function(e){he=!0!==e},backFromPageToTop:function(e){pe=!0===e},nearestPageToTop:function(e){xe=!0===e},rememberSectionsStatus:function(e){me=!0===e},rememberSectionsLastPage:function(e){be=!0===e},scrollTheSection:function(e){Te!==e&&(Te=!0===e,Brav1Toolbox.hasClass(y,T)||!0!==Te?Brav1Toolbox.hasClass(y,T)&&!0!==Te&&Brav1Toolbox.removeClass(y,T):Brav1Toolbox.addClass(y,T),Ye.updateOffsets(),mt())},toSectionsFromPages:function(e){ue=!1!==e}}}();






















